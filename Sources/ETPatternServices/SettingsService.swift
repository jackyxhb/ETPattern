//\n//  SettingsService.swift\n//  ETPatternServices\n//\n//  Created by Claude 4.5 on 2026-01-23.\n//\n\nimport Foundation\nimport ETPatternModels\n\npublic protocol SettingsServiceProtocol {\n    var studyStrategy: StudyStrategy { get set }\n    var cardOrderMode: String { get set }\n    var autoPlayOrderMode: String { get set }\n    var selectedVoice: String { get set }\n    var ttsPercentage: Float { get set }\n}\n\npublic class SettingsService: SettingsServiceProtocol {\n    public static let shared = SettingsService()\n    \n    private let defaults = UserDefaults.standard\n    \n    private init() {\n        initializeDefaults()\n    }\n    \n    private func initializeDefaults() {\n        if defaults.string(forKey: "cardOrderMode") == nil {\n            defaults.set("random", forKey: "cardOrderMode")\n        }\n        if defaults.string(forKey: "autoPlayOrderMode") == nil {\n            defaults.set("sequential", forKey: "autoPlayOrderMode")\n        }\n        if defaults.string(forKey: "selectedVoice") == nil {\n            defaults.set("en-US", forKey: "selectedVoice")\n        }\n        if defaults.float(forKey: "ttsPercentage") == 0 {\n            defaults.set(Constants.TTS.defaultPercentage, forKey: "ttsPercentage")\n        }\n    }\n    \n    public var studyStrategy: StudyStrategy {\n        get {\n            StudyStrategy(rawValue: defaults.string(forKey: "studyStrategy") ?? "intelligent") ?? .intelligent\n        }\n        set {\n            defaults.set(newValue.rawValue, forKey: "studyStrategy")\n        }\n    }\n    \n    public var cardOrderMode: String {\n        get { defaults.string(forKey: "cardOrderMode") ?? "random" }\n        set { defaults.set(newValue, forKey: "cardOrderMode") }\n    }\n    \n    public var autoPlayOrderMode: String {\n        get { defaults.string(forKey: "autoPlayOrderMode") ?? "sequential" }\n        set { defaults.set(newValue, forKey: "autoPlayOrderMode") }\n    }\n    \n    public var selectedVoice: String {\n        get { defaults.string(forKey: "selectedVoice") ?? "en-US" }\n        set { defaults.set(newValue, forKey: "selectedVoice") }\n    }\n    \n    public var ttsPercentage: Float {\n        get { defaults.float(forKey: "ttsPercentage") }\n        set { defaults.set(newValue, forKey: "ttsPercentage") }\n    }\n}